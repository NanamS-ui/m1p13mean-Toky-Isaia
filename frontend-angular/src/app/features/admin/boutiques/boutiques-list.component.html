<div class="boutiques-page">
  <div class="page-header">
    <h2>Gestion des boutiques</h2>
    <a [routerLink]="['/admin/boutiques/nouvelle']" class="btn btn--primary">Créer une boutique</a>
  </div>

  <div class="card filters-card">
    <h3>Filtres</h3>
    <div class="filters">
      <div class="form-group">
        <label>Statut</label>
        <select [(ngModel)]="filterStatus" (ngModelChange)="filterStatus = $event">
          <option value="">Tous</option>
          <option value="PENDING">En attente</option>
          <option value="ACTIVE">Active</option>
          <option value="DISABLED">Désactivée</option>
          <option value="REJECTED">Refusée</option>
        </select>
      </div>
      <div class="form-group">
        <label>Catégorie</label>
        <select [(ngModel)]="filterCategory" (ngModelChange)="filterCategory = $event">
          <option value="">Toutes</option>
          @for (cat of categories; track cat.value) {
            <option [value]="cat.value">{{ cat.label }}</option>
          }
        </select>
      </div>
    </div>
  </div>

  <div class="card table-card">
    <div class="table-wrapper">
      <table class="data-table">
        <thead>
          <tr>
            <th>Boutique</th>
            <th>Catégorie</th>
            <th>Statut</th>
            <th>Propriétaire</th>
            <th>Loyer mensuel</th>
            <th>Loyer payé jusqu'au</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          @for (b of filteredBoutiques; track b.id) {
            <tr>
              <td><strong>{{ b.name }}</strong></td>
              <td>{{ getCategoryLabel(b.category) }}</td>
              <td>
                <span class="badge" [class]="'badge--' + b.status.toLowerCase()">{{ getStatusLabel(b.status) }}</span>
              </td>
              <td>{{ b.ownerEmail }}</td>
              <td>{{ b.monthlyRent | number }} Ar</td>
              <td>{{ b.rentPaidUntil || '—' }}</td>
              <td>
                <a [routerLink]="['/admin/boutiques', b.id]" class="btn-link">Modifier</a>
                @if (b.status === 'PENDING') {
                  <button type="button" class="btn-link btn-link--success">Valider</button>
                }
                @if (b.status === 'ACTIVE') {
                  <button type="button" class="btn-link btn-link--danger">Désactiver</button>
                }
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
</div>
