<div class="contact-page">
  <!-- Header -->
  <section class="contact-header">
    <div class="container">
      <h1 class="page-title">
        <span class="material-symbols-outlined">mail</span>
        Contact
      </h1>
      <p class="page-subtitle">Une question ? Nous sommes là pour vous aider</p>
    </div>
  </section>

  <!-- Main Content -->
  <section class="section section--main">
    <div class="container">
      <div class="content-layout">
        <!-- Left Column: Contact Form -->
        <div class="form-column">
          <div class="form-card">
            <h2 class="form-title">Envoyez-nous un message</h2>
            <p class="form-description">Remplissez le formulaire ci-dessous et nous vous répondrons dans les plus brefs délais.</p>

            @if (submitSuccess()) {
              <div class="alert alert--success">
                <span class="material-symbols-outlined">check_circle</span>
                <div>
                  <strong>Message envoyé !</strong>
                  <p>Nous vous répondrons dans les plus brefs délais.</p>
                </div>
              </div>
            }

            <form [formGroup]="contactForm" (ngSubmit)="onSubmit()" class="contact-form">
              <!-- Name Field -->
              <div class="form-group">
                <label for="name" class="form-label">
                  Nom complet <span class="required">*</span>
                </label>
                <input
                  type="text"
                  id="name"
                  formControlName="name"
                  class="form-input"
                  [class.form-input--error]="contactForm.get('name')?.invalid && contactForm.get('name')?.touched"
                  placeholder="Votre nom"
                />
                @if (getFieldError('name')) {
                  <span class="error-message">{{ getFieldError('name') }}</span>
                }
              </div>

              <!-- Email Field -->
              <div class="form-group">
                <label for="email" class="form-label">
                  Email <span class="required">*</span>
                </label>
                <input
                  type="email"
                  id="email"
                  formControlName="email"
                  class="form-input"
                  [class.form-input--error]="contactForm.get('email')?.invalid && contactForm.get('email')?.touched"
                  placeholder="votre.email@exemple.com"
                />
                @if (getFieldError('email')) {
                  <span class="error-message">{{ getFieldError('email') }}</span>
                }
              </div>

              <!-- Subject Field -->
              <div class="form-group">
                <label for="subject" class="form-label">
                  Sujet <span class="required">*</span>
                </label>
                <input
                  type="text"
                  id="subject"
                  formControlName="subject"
                  class="form-input"
                  [class.form-input--error]="contactForm.get('subject')?.invalid && contactForm.get('subject')?.touched"
                  placeholder="Objet de votre message"
                />
                @if (getFieldError('subject')) {
                  <span class="error-message">{{ getFieldError('subject') }}</span>
                }
              </div>

              <!-- Message Field -->
              <div class="form-group">
                <label for="message" class="form-label">
                  Message <span class="required">*</span>
                </label>
                <textarea
                  id="message"
                  formControlName="message"
                  class="form-textarea"
                  [class.form-textarea--error]="contactForm.get('message')?.invalid && contactForm.get('message')?.touched"
                  rows="6"
                  placeholder="Votre message..."
                ></textarea>
                @if (getFieldError('message')) {
                  <span class="error-message">{{ getFieldError('message') }}</span>
                }
              </div>

              <!-- Submit Button -->
              <button
                type="submit"
                class="btn btn--primary btn--lg"
                [disabled]="submitted()">
                @if (submitted()) {
                  <span class="material-symbols-outlined spin">sync</span>
                  Envoi en cours...
                } @else {
                  <span class="material-symbols-outlined">send</span>
                  Envoyer le message
                }
              </button>
            </form>
          </div>
        </div>

        <!-- Right Column: Contact Info & FAQ -->
        <div class="sidebar-column">
          <!-- Contact Info Card -->
          <div class="sidebar-card">
            <h3 class="sidebar-card__title">
              <span class="material-symbols-outlined">info</span>
              Informations de contact
            </h3>
            <div class="sidebar-card__content">
              <div class="contact-info-item">
                <span class="material-symbols-outlined contact-icon">phone</span>
                <div>
                  <strong>Téléphone</strong>
                  <a [href]="'tel:' + contactInfo.phone">{{ contactInfo.phone }}</a>
                </div>
              </div>
              <div class="contact-info-item">
                <span class="material-symbols-outlined contact-icon">mail</span>
                <div>
                  <strong>Email</strong>
                  <a [href]="'mailto:' + contactInfo.email">{{ contactInfo.email }}</a>
                </div>
              </div>
              <div class="contact-info-item">
                <span class="material-symbols-outlined contact-icon">location_on</span>
                <div>
                  <strong>Adresse</strong>
                  <p>{{ contactInfo.address }}</p>
                </div>
              </div>
              <div class="contact-info-item">
                <span class="material-symbols-outlined contact-icon">schedule</span>
                <div>
                  <strong>Horaires</strong>
                  <p>{{ contactInfo.hours }}</p>
                </div>
              </div>
            </div>
          </div>

          <!-- FAQ Card -->
          <div class="sidebar-card">
            <h3 class="sidebar-card__title">
              <span class="material-symbols-outlined">help</span>
              Questions fréquentes
            </h3>
            <div class="sidebar-card__content">
              <div class="faq-list">
                @for (faq of faqs(); track faq.id) {
                  <div class="faq-item" [class.faq-item--expanded]="faq.expanded">
                    <button
                      type="button"
                      class="faq-question"
                      (click)="toggleFAQ(faq.id)">
                      <span>{{ faq.question }}</span>
                      <span class="material-symbols-outlined faq-icon">
                        {{ faq.expanded ? 'expand_less' : 'expand_more' }}
                      </span>
                    </button>
                    @if (faq.expanded) {
                      <div class="faq-answer">
                        <p>{{ faq.answer }}</p>
                      </div>
                    }
                  </div>
                }
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
